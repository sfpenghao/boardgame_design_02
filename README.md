# 概率计算脚本集合

这个项目包含了多个用于计算集合抽取概率的Python脚本，专门解决以下问题：

**问题描述：**
- 有一个集合n，包含A、B、C、D、E五种元素
- 每种元素数量都大于等于2
- 总元素数量大于等于10
- 随机给定一个三元素组合（如AAB，可能有重复）
- 从集合n中随机抽出5个元素
- 求5个元素中包含给定组合的概率

## 脚本说明

### 1. `simple_probability.py` - 简化版概率计算器

**功能：**
- 使用蒙特卡罗模拟方法计算概率
- 提供快速测试和自定义计算功能
- 适合快速得到近似结果

**使用方法：**
```bash
python simple_probability.py
```

**特点：**
- 运行速度快
- 结果精度取决于模拟次数
- 包含多个预设测试案例
- 支持用户自定义输入

### 2. `exact_probability.py` - 精确概率计算器

**功能：**
- 使用精确数学方法（完全枚举）计算概率
- 提供100%准确的结果
- 分析不同配置下的概率趋势

**使用方法：**
```bash
python exact_probability.py
```

**特点：**
- 结果完全精确
- 计算时间较长（需要枚举所有组合）
- 适合小规模问题的精确分析
- 包含概率趋势分析

### 3. `probability_calculator.py` - 完整版概率计算器

**功能：**
- 集成蒙特卡罗模拟和精确计算两种方法
- 提供详细的分析和对比
- 支持多种场景测试

**使用方法：**
```bash
python probability_calculator.py
```

**特点：**
- 功能最全面
- 同时提供近似和精确结果
- 包含误差分析
- 支持自定义配置

## 示例结果

### 默认配置示例
- **集合配置：** A:2, B:2, C:2, D:2, E:2 (总共10个元素)
- **目标组合AAB的概率：** 约14.26%
- **目标组合ABC的概率：** 约40.26%

### 增强配置示例
- **集合配置：** A:3, B:3, C:2, D:2, E:2 (总共12个元素)
- **目标组合AAB的概率：** 约27.08%

## 核心算法

### 蒙特卡罗模拟
1. 多次随机抽取5个元素
2. 检查每次抽取是否包含目标组合
3. 统计成功次数计算概率

### 精确计算
1. 枚举所有可能的5元素组合
2. 检查每种组合是否包含目标组合
3. 计算满足条件的组合数占总组合数的比例

## 数学原理

这是一个**超几何分布**问题的变体：
- 总体：包含各种元素的集合
- 样本：随机抽取的5个元素
- 条件：样本必须包含指定的目标组合

概率计算公式：
```
P = (满足条件的组合数) / (总的组合数)
```

其中：
- 总的组合数 = C(总元素数, 5)
- 满足条件的组合数需要通过枚举或数学推导计算

## 使用建议

1. **快速估计：** 使用 `simple_probability.py`
2. **精确结果：** 使用 `exact_probability.py`（适合小规模问题）
3. **全面分析：** 使用 `probability_calculator.py`
4. **大规模问题：** 只使用蒙特卡罗模拟，避免精确计算

## 注意事项

1. 精确计算的时间复杂度随总元素数指数增长
2. 当总元素数超过20时，建议只使用蒙特卡罗模拟
3. 增加模拟次数可以提高蒙特卡罗方法的精度
4. 所有脚本都会验证输入约束条件（每种元素≥2，总数≥10）

## 扩展应用

这个算法框架可以扩展用于：
- 桌游概率计算
- 抽卡游戏概率分析
- 质量控制抽样检验
- 其他组合概率问题 